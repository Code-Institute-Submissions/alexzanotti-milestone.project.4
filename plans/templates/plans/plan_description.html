{% extends "base.html" %}
{% load static %}

{% block title %}{{ plan.name }} Plan{% endblock %}
{% block image %}{{ plan.name }} Plan{% endblock %}

{% block content %}
<h1>{{ plan.name }}</h1>
{% if plan.image_field %}
<img src="{{ plan.image_field.url }}" class="card-img-top" alt="{{ plan.name }}">
{% else %}
<img src="" class="card-img-top" alt="{{ plan.name }}">
{% endif %}
<p class="card-text">{{ plan.description }}</p>

<h2>Comments</h2>
{% for comment in comments %}
<p>
    <strong>{{ comment.author.user.username }}</strong>
    {{ comment.created_at }}
    {{ comment.content }}
</p>
{% empty %}
<p>No comments yet.</p>
{% endfor %}

{% if user.is_authenticated %}
<a href="{% url 'plans:add_comment' plan_id=plan.id %}" class="btn btn-primary">Add Comment</a>
{% endif %}

{% endblock %}
